const mdBreakPoint=768,clientWidth=document.documentElement.clientWidth,clientHeight=document.documentElement.clientHeight;let burgerCircle=document.querySelector(".burger-circle"),header_burger=document.querySelector(".header__burger"),header_menu=document.querySelector(".header__menu"),menu__list=document.querySelector(".menu__list");burgerCircle.addEventListener("click",(function(e){clientWidth>768||(e.preventDefault(),header_burger.classList.toggle("active"),header_menu.classList.toggle("active"))})),menu__list.addEventListener("click",(function(e){e.preventDefault(),!e.target.dataset.name||clientWidth>768||(header_burger.classList.toggle("active"),header_menu.classList.toggle("active"))}));let header=document.body.querySelector(".header"),header__inner=document.body.querySelector(".header__inner");$(window).on("load",(function(){$(".menu__link, .logo-link, .intro__btn, .f-menu__link").mPageScroll2id({offset:40,scrollSpeed:500})}));let currentScrollPosition=window.pageYOffset;function isStartPage(e){clientWidth>768?(window.pageYOffset>=clientHeight/3&&window.pageYOffset<clientHeight/2&&header.classList.add("hide"),window.pageYOffset<clientHeight/3&&(header.style.transition="all 0s",header.classList.remove("hide"),header.classList.remove("fixed"),header__inner.style.padding=""),window.pageYOffset>=clientHeight/2&&(header.style.transition="",header__inner.style.padding="15px 0",header.classList.remove("hide"),header.classList.add("fixed"))):(header.classList.add("fixed-mobile"),header__inner.style.padding="10px 0"),currentScrollPosition=window.pageYOffset}window.addEventListener("scroll",isStartPage),window.addEventListener("load",(function(e){isStartPage()}));const animItems=document.querySelectorAll(".anim-items");if(animItems.length>0){function animOnScroll(){for(let e=0;e<animItems.length;e++){const t=animItems[e],a=t.offsetHeight,s=offset(t).top,i=2;let l=window.innerHeight-a/i;a>window.innerHeight&&(l=window.innerHeight-window.innerHeight/i),pageYOffset>s-l&&pageYOffset<s+a?t.classList.add("active"):t.classList.contains("anim-no-hide")||t.classList.remove("active")}}function offset(e){const t=e.getBoundingClientRect(),a=window.pageYOffset||document.documentElement.scrollLeft;window.pageYOffset||document.documentElement.scrollTop;return{top:t.top+a,left:t.left+a}}window.addEventListener("scroll",animOnScroll),setTimeout(()=>animOnScroll(),300)}let parallaxMouseArea=document.querySelector(".parallax__dark-rect"),parallax_bg=document.querySelector(".scene__bg"),alena=document.querySelector(".alena-img"),speedBg=parallax_bg.getAttribute("data-speed"),speedAlena=alena.getAttribute("data-speed");function parallax(e){clientWidth>768&&(parallax_bg.style.transform="translateX("+(e.clientX*speedBg/15e3-1)+"%)",alena.style.transform="",alena.style.transform+="translateX(-"+(50+e.clientX*speedAlena/6e3)+"%)",alena.style.transform+="translateY(-"+(e.clientY*speedAlena/1200-4)+"%)")}parallaxMouseArea.addEventListener("mousemove",parallax);let tabsContent=document.querySelector(".tabs-content"),tabsModal=document.querySelector(".tabs-modal"),tabsModalImage=document.querySelector(".tabs-modal__image");function closeModal(e){e.target.dataset.close&&(tabsModal.classList.remove("active"),header.classList.remove("hide"),document.body.classList.remove("lock"))}tabsContent.addEventListener("click",e=>{let t=e.target;t.classList.contains("tabs-content__photo")&&(tabsModalImage.src=t.src,tabsModal.classList.add("active"),header.classList.add("hide"),document.body.classList.add("lock"))}),tabsModal.addEventListener("click",closeModal),tabsModal.addEventListener("touchstart",closeModal);const HIDE_ANIMATION_SPEED=200;let allTabs=document.querySelectorAll(".tabs-triggers__item"),allTabsContent=document.querySelectorAll(".tabs-content__item");allTabs.forEach(e=>{e.addEventListener("click",e=>{e.preventDefault(),allTabs.forEach(e=>{e.classList.remove("active")}),allTabsContent.forEach(e=>{e.classList.add("hide"),setTimeout(()=>{e.classList.remove("hide"),e.classList.remove("active")},200)}),e.target.classList.add("active"),setTimeout(()=>{let t=document.querySelector(e.target.getAttribute("href"));t.classList.add("hide"),t.classList.add("active"),setTimeout(()=>{t.classList.remove("hide")},200)},200)})});const HIDE_PORTFOLIO_SPEED=400;let allPortfolioBtn=document.querySelectorAll(".p-main__btn"),mainPortfolioArea=document.querySelector(".p-area"),portfolioTabs=document.querySelector(".tabs");allPortfolioBtn.forEach(e=>{e.addEventListener("click",e=>{e.preventDefault();let t=e.target.getAttribute("href").slice(1);document.querySelector("."+t).classList.add("active"),document.querySelector(e.target.getAttribute("href")).classList.add("active"),mainPortfolioArea.classList.add("hide"),setTimeout(()=>{mainPortfolioArea.classList.remove("active"),mainPortfolioArea.classList.remove("hide"),portfolioTabs.classList.add("active"),portfolioTabs.classList.add("hide"),setTimeout(()=>{portfolioTabs.classList.remove("hide")},400)},420)})});let servicePhotoBody=document.querySelector(".service-photo__body"),serviceVideoBody=document.querySelector(".service-video__body"),photoTab=document.querySelector(".photo-tab"),videoTab=document.querySelector(".video-tab"),servicePhoto=document.querySelector(".service-photo"),serviceVideo=document.querySelector(".service-video");servicePhotoBody.classList.add("active"),photoTab.classList.add("active"),servicePhoto.classList.add("active"),photoTab.addEventListener("click",e=>{videoTab.classList.remove("active"),serviceVideoBody.classList.remove("active"),serviceVideo.classList.remove("active"),servicePhotoBody.classList.add("active"),photoTab.classList.add("active"),servicePhoto.classList.add("active")}),videoTab.addEventListener("click",e=>{servicePhotoBody.classList.remove("active"),photoTab.classList.remove("active"),servicePhoto.classList.remove("active"),videoTab.classList.add("active"),serviceVideoBody.classList.add("active"),serviceVideo.classList.add("active")});const ANIMATION_MODAL_SPEED=300;let dateBtn=document.getElementById("date"),serviceFormBtn=document.querySelector(".service-form__btn"),serviceModalWrapper=document.querySelector(".service-modal__wrapper"),nameField=document.getElementById("name"),surnameField=document.getElementById("surname"),emailField=document.getElementById("email"),dateField=document.getElementById("date"),emailLabel=document.querySelector(".email-label"),phoneLabel=document.querySelector(".phone-label");function validateEmail(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}let iti=!1,telInput=document.getElementById("phone");function redirectToResModal(){let e=document.createElement("div");e.classList.add("res-modal__window"),e.innerHTML=`\n    <div class="service-window__header">\n      <h1 class="service-window__title">Информация о заказе</h1>\n      <span class="service-window__close" data-close="true">&times;</span>\n    </div>\n    <div class="service-window__body">\n      <div class="service-window__resItem">Клиент: <span>${surnameField.value} ${nameField.value}</span></div>\n      <div class="service-window__resItem">Email для связи: <span>${emailField.value}</span></div>\n      <div class="service-window__resItem">Дата и время: <span>${dateField.value}</span></div>\n    </div>\n  `,serviceModalWindow.classList.add("center"),serviceModal.classList.add("center"),serviceModalWrapper.style.display="none",serviceModalWindow.insertAdjacentElement("afterbegin",e)}setTimeout(()=>{window.addEventListener("load",()=>{iti=window.intlTelInput(telInput,{utilsScript:"js/utils.js",initialCountry:"ru",preferredCountries:["ru"],autoHideDialCode:!1})})},100),telInput.addEventListener("keypress",e=>{+e.key>=0&&+e.key<=9||"+"==e.key||"-"==e.key||"("==e.key||")"==e.key||e.preventDefault()}),serviceFormBtn.addEventListener("click",e=>{e.preventDefault(),nameField.classList.remove("error"),surnameField.classList.remove("error"),emailField.classList.remove("error"),dateField.classList.remove("error"),telInput.classList.remove("error"),emailLabel.classList.remove("error-email"),phoneLabel.classList.remove("error-phone");let t=!1;""==nameField.value&&(nameField.classList.add("error"),t=!0),""==surnameField.value&&(surnameField.classList.add("error"),t=!0),""==emailField.value&&(emailField.classList.add("error"),t=!0),validateEmail(emailField.value)||(emailField.classList.add("error"),emailLabel.classList.add("error-email"),t=!0),""==dateField.value&&(dateField.classList.add("error"),t=!0),iti.isValidNumber()||(telInput.classList.add("error"),phoneLabel.classList.add("error-phone"),t=!0),t?e.preventDefault():(e.preventDefault(),redirectToResModal())}),dateBtn.addEventListener("click",e=>{calModal.classList.remove("hide"),renderCalendar()});let serviceModal=document.querySelector(".service-modal"),serviceModalWindow=document.querySelector(".service-modal__window");function closeModalService(e){if(e.target.dataset.close){let e=document.querySelector(".res-modal__window");e&&e.remove(),serviceModalWindow.classList.remove("center"),serviceModal.classList.remove("center"),setTimeout(()=>{serviceModalWrapper.style.display=""},300),header.classList.remove("hide"),serviceModal.classList.add("hide"),serviceModalWindow.classList.add("hide"),document.body.classList.remove("lock")}}serviceModal.addEventListener("click",closeModalService);let serviceOpenBtns=document.querySelectorAll(".service-card__btn");serviceOpenBtns.forEach(e=>{e.addEventListener("click",e=>{header.classList.add("hide"),document.body.classList.add("lock"),serviceModal.classList.remove("hide"),serviceModalWindow.classList.remove("hide"),serviceModalWindow.querySelector("#"+e.target.dataset.service).checked=!0})});